---
id: bulkPortins
title: Create Bulk Portin
slug: /numbers/guides/porting/bulkPortins
description: How to manage bulk port-in order using the Bandwidth API
keywords:
  - bandwidth
  - bulkportins
  - portin
image: ../../static/img/bandwidth-logo.png
---

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

export const accountId = "{accountId}";
export const orderId = "{orderId}";
export const disconnectId = "{bulkOrderId}";

export const Highlight = ({children, color}) => (
    <span
      style={{
        backgroundColor: color,
        borderRadius: '2px',
        color: '#fff',
        padding: '0.2rem',
      }}>
      {children}
    </span>
  );


[The bulkPortins endpoint](/apis/numbers#operation/ListBulkPortins) is used to manage requests to port a diverse collection of Telephone Numbers into the Bandwidth Dashboard. These telephone numbers will be decomposed into a set of individual port-in orders based on port-type, losing carrier, losing RespOrg, etc., making all reasonable attempts to treat the individual port-in requests in a uniform manner.
:::info
If you want to create individual port-in you can use `/portins` API. For more details follow the [How to create Port in request](/docs/numbers/guides/porting/portingNumbers) guide.
:::

Like many other requests, the bulkPortins endpoint causes the creation of a Bulk Portins order that is used to manage the porting event throughout the lifecycle of the request.

To create Port-in request, you must make a <Highlight color="#079CEE">POST</Highlight> request to our [API /portins](/apis/numbers/#operation/CreatePortin) endpoint. This can be done through our [SDKs](/sdks), using tools like [Postman](https://github.com/Bandwidth/postman), or in command line.


<Highlight color="#079CEE">POST</Highlight> <code>https://dashboard.bandwidth.com/api/accounts/{accountId}/bulkPortins</code>
<Tabs
    groupId="createBulkPortin"
    defaultValue="payload"
    values={[
        { label: 'Request Payload', value: 'payload', },
        { label: 'cURL', value: 'curl', },
        { label: 'Java', value: 'java', },
        { label: 'C#', value: 'csharp', },
        { label: 'Ruby', value: 'ruby', },
        { label: 'NodeJS', value: 'nodejs', },
        { label: 'PHP', value: 'php', },
    ]
    }>
<TabItem value="payload">

```xml
Note: Remember to add authentication for your application if needed!

https://dashboard.bandwidth.com/api/accounts/{accountId}/portins
//Make sure an authentication header is added with your BANDWIDTH_USERNAME and BANDWIDTH:PASSWORD
<LnpOrder>
    <RequestedFocDate>2016-03-25T21:15:00.000Z</RequestedFocDate>
    <AlternateSpid>X455</AlternateSpid>
    <BillingTelephoneNumber>9195551234</BillingTelephoneNumber>
    <NewBillingTelephoneNumber>9175131245</NewBillingTelephoneNumber>
    <SiteId>12345</SiteId>
    <PeerId>660123</PeerId>
    <Subscriber>
        <SubscriberType>BUSINESS</SubscriberType>
        <FirstName>First</FirstName>
        <LastName>Last</LastName>
        <ServiceAddress>
            <HouseNumber>11235</HouseNumber>
            <StreetName>Back</StreetName>
            <City>Denver</City>
            <StateCode>CO</StateCode>
            <Zip>27541</Zip>
            <County>Canyon</County>
        </ServiceAddress>
    </Subscriber>
    <LoaAuthorizingPerson>The Authguy</LoaAuthorizingPerson>
    <WirelessInfo>
        <AccountNumber>771297665AABC</AccountNumber>
        <PinNumber>1234</PinNumber>
    </WirelessInfo>
    <ListOfPhoneNumbers>
        <PhoneNumber>9195551234</PhoneNumber>
        <PhoneNumber>9195554321</PhoneNumber>
    </ListOfPhoneNumbers>
    <Triggered>true</Triggered>
</LnpOrder>
```

</TabItem>
<TabItem value="curl">

```cURL
Note: Remember to add authentication for your application if needed!

curl 'https://dashboard.bandwidth.com/api/accounts/{BW_ACCOUNT_ID}/portins' \
-X POST \
-U '{BANDWIDTH_USERNAME}:{BANDWIDTH:PASSWORD}' \
-H 'Content-Type: application/xml' \
-d '<LnpOrder>
<RequestedFocDate>2016-03-25T21:15:00.000Z</RequestedFocDate>
<AlternateSpid>X455</AlternateSpid>
<BillingTelephoneNumber>9195551234</BillingTelephoneNumber>
<NewBillingTelephoneNumber>9175131245</NewBillingTelephoneNumber>
<SiteId>12345</SiteId>
<PeerId>660123</PeerId>
<Subscriber>
    <SubscriberType>BUSINESS</SubscriberType>
    <FirstName>First</FirstName>
    <LastName>Last</LastName>
    <ServiceAddress>
        <HouseNumber>11235</HouseNumber>
        <StreetName>Back</StreetName>
        <City>Denver</City>
        <StateCode>CO</StateCode>
        <Zip>27541</Zip>
        <County>Canyon</County>
    </ServiceAddress>
</Subscriber>
<LoaAuthorizingPerson>The Authguy</LoaAuthorizingPerson>
<WirelessInfo>
    <AccountNumber>771297665AABC</AccountNumber>
    <PinNumber>1234</PinNumber>
</WirelessInfo>
<ListOfPhoneNumbers>
    <PhoneNumber>9195551234</PhoneNumber>
    <PhoneNumber>9195554321</PhoneNumber>
</ListOfPhoneNumbers>
<Triggered>true</Triggered>
</LnpOrder>'
```

</TabItem>
<TabItem value="java">

```java
import com.bandwidth.iris.sdk.IrisClient;
import com.bandwidth.iris.sdk.model.LnpOrder;
import com.bandwidth.iris.sdk.model.ServiceAddress;
import com.bandwidth.iris.sdk.model.Subscriber;

public class Main {

public static void main(String[] args) {
String accountId = System.getenv("BANDWIDTH_IRIS_ACCOUNTID");
String username = System.getenv("BANDWIDTH_IRIS_USERNAME");
String password = System.getenv("BANDWIDTH_IRIS_PASSWORD");
String irisUrl = System.getenv("BANDWIDTH_IRIS_URL");
String version = System.getenv("BANDWIDTH_IRIS_URL");

IrisClient client = new IrisClient(irisUrl, accountId, username, password, version);

Subscriber s = new Subscriber();
s.setSubscriberType("BUSINESS");
s.setBusinessName("Company");
ServiceAddress serviceAddress = new ServiceAddress();
serviceAddress.setHouseNumber("123");
serviceAddress.setStreetName("Anywhere St");
serviceAddress.setCity("Raleigh");
serviceAddress.setStateCode("NC");
serviceAddress.setZip("27609");
s.setServiceAddress(serviceAddress);

LnpOrder order = new LnpOrder();
order.setSiteId("123");
order.setPeerId("12345");
order.setBillingTelephoneNumber("9195551212");
order.setSubscriber(s);
order.setLoaAuthorizingPerson("Joe Blow");
order.getListOfPhoneNumbers().add("9195551212");

try {
order = LnpOrder.create(client, order);
System.out.println(order);
} catch (Exception e) {
System.out.println(e.getMessage());
}
}
}
```

</TabItem>
<TabItem value="csharp">

```csharp
var accountId = System.Environment.GetEnvironmentVariable("BANDWIDTH_API_ACCOUNT_ID");
var username = System.Environment.GetEnvironmentVariable("BANDWIDTH_API_USERNAME");
var password = System.Environment.GetEnvironmentVariable("BANDWIDTH_API_PASSWORD");
var apiEndpoint = System.Environment.GetEnvironmentVariable("BANDWIDTH_API_ENDPOINT");

var client = Client.GetInstance(accountId, username, password, apiEndpoint)

var data = new PortIn
{
    BillingTelephoneNumber = "+1-202-555-0158",
    Subscriber = new Subscriber
{
    SubscriberType = "BUSINESS",
    BusinessName = "Company",
    FirstName = "John",
    LastName = "Doe",
    ServiceAddress = new Address
{
    City = "City",
    StateCode = "State",
    Country = "Country"
}
},
    PeerId = "12345",
    SiteId = "123"
};
var order = await PortIn.Create(client, data);
```

</TabItem>
<TabItem value="ruby">

```ruby
require 'ruby-bandwidth-iris'

BandwidthIris::Client.global_options = {
:account_id => 'accountId',
:username => 'userName',
:password => 'password'
}

data = {
:site_id =>1234,
:peer_id => 5678,
:billing_telephone_number => "9195551212",
:subscriber => {
:subscriber_type => "BUSINESS",
:business_name => "Company",
:service_address => {
:house_number => "123",
:street_name => "EZ Street",
:city => "Raleigh",
:state_code => "NC",
:county => "Wake"
}
},
:loa_authorizing_person => "Joe Blow",
:list_of_phone_numbers => {
:phone_number => ["9195551212"]
},
:billing_type => "PORTIN"
}

portin_response = BandwidthIris::PortIn.create(data)
```

</TabItem>
<TabItem value="nodejs">

```js
var numbers = require("@bandwidth/numbers");

var data = {
siteId: 1234,
peerId: 5678,
billingTelephoneNumber: "9195551212",
subscriber: {
subscriberType: "BUSINESS",
businessName: "Company",
serviceAddress: {
houseNumber: "123",
streetName: "EZ Street",
city: "Raleigh",
stateCode: "NC",
county: "Wake"
}
},
loaAuthorizingPerson: "Joe Blow",
listOfPhoneNumbers: {
phoneNumber: ["9195551212"]
},
billingType: "PORTIN"
};

// Using client directly
// var client = new numbers.Client("accountId", "userName", "password");
// numbers.PortIn.create(client, function(err, response){...});

//Or you can use default client instance (do this only once)
numbers.Client.globalOptions.accountId = "accountId";
numbers.Client.globalOptions.userName = "userName";
numbers.Client.globalOptions.password = "password";

//Default client will be used to do this call
numbers.PortIn.create(data, callback);
```

</TabItem>
<TabItem value="php">

```php
$accountId = getenv("BANDWIDTH_API_ACCOUNT_ID");
$username = getenv("BANDWIDTH_API_USERNAME");
$password = getenv("BANDWIDTH_API_PASSWORD");
$apiEndpoint = getenv("BANDWIDTH_API_ENDPOINT");

$client = new \Iris\Client($username, $password, ['url' => $apiEndpoint]);
$account = new \Iris\Account($accountId, $client);

try {
$portin = $account->portins()->create(array(
"BillingTelephoneNumber" => "6882015002",
"Subscriber" => array(
"SubscriberType" => "BUSINESS",
"BusinessName" => "Acme Corporation",
"ServiceAddress" => array(
"HouseNumber" => "1623",
"StreetName" => "Brockton Ave",
"City" => "Los Angeles",
"StateCode" => "CA",
"Zip" => "90025",
"Country" => "USA"
)
),
"LoaAuthorizingPerson" => "John Doe",
"ListOfPhoneNumbers" => array(
"PhoneNumber" => array("9882015025", "9882015026")
),
"SiteId" => "365",
"Triggered" => "false"
));
} catch (BandwidthLib\APIException $e) {
print_r($e->getResponseCode());
}
```

</TabItem>
</Tabs>

The set of port-ins associated with the bulk port-in remain in a DRAFT state until you've had a chance to examine the breakdown. From that point, you can decide to submit all of the port-ins together under the umbrella of the bulk port-in, or you can separate out individual port-ins to submit by themselves.

When a bulk port-in is created successfully, it will have one or more child port-in orders that satisfy the following industry port-in rules:

* Telephone numbers in a child port-in order all have the same port-type (e.g. toll free, automated on-net, automated off-net, internal, etc.).
* Non-toll free telephone numbers in a child port-in order all have the same losing carrier.
* Toll free telephone numbers in a child port-in order all have the same losing RespOrg.

The elements used or supplied in the bulk port-in payload are described in the table below. The values supplied in the bulk port-in payload are cascaded to the child port-in orders when possible. This is useful, for example, if you want all of the child orders to have the same CustomerOrderId, or RequestedFocDate.

All bulk port-ins start in a draft processing status and remain in a draft state until explicitly submitted
by setting the bulk port-in ProcessingStatus to IN_PROGRESS. The bulk order starts in “DRAFT” state until
telephone numbers are added using the /tnList endpoint. Once telephone numbers are added, the order
transitions to VALIDATE_DRAFT_TNS, and from there to either VALID_DRAFT_TNS, or INVALID_DRAFT_TNS.
If there are invalid, or non-portable telephone numbers, a GET on [/tnList](/apis/numbers/#operation/ListBulkTns) will show the errors. If all
telephone numbers are portable, child port-in orders are created to handle the actual port-ins.

A bulk port-in order may have one of 3 terminal processing statuses: COMPLETED, CANCELLED, or PARTIAL, which are just an aggregation of the child order statuses. An order in a “terminal” state will never transition to any other processing status (terminal or not). A bulk port-in order goes to a terminal status automatically as soon as the last of its associated child port-ins transfers to terminal status (COMPLETE or CANCELLED). The resulting terminal processing status of the bulk port-in order depends on statuses of associated child port-ins: COMPLETED - when all child port-ins are in COMPLETE status, CANCELLED - when all child port-ins are in CANCELLED status, PARTIAL - when there is a mix of CANCELLED and COMPLETE child port-in statuses.

The following table describes parameters for the bulk port-in API. All parameters except for the URL parameter "accountId" are optional in the bulk port-in, although the rules for individual child port-ins described in the  [/portins](/apis/numbers/#operation/ListPortins)  API still apply to the child port-ins that make up the bulk port-in. Enforcement of required fields in the child port-ins occurs when the bulk port-in is submitted (i.e. changed from a DRAFT status to IN_PROGRESS). Only fields that you wish to use as defaults for all of the child port-in orders should be included in the bulk port-in order. The child port-ins are also created in DRAFT status, allowing you to update fields that need to be different for each child order before the child orders are submitted.
