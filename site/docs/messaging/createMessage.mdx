---
id: createMessage
title: Send Messages
slug: /messaging/createMessage
description: Send text messages with Bandwidth's Messaging API
keywords:
  - bandwidth
  - messaging
  - send
hide_title: false
image: ../../static/img/bandwidth-logo.png
---

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

export const accountId = "{accountId}";

export const Highlight = ({children, color}) => (
    <span
      style={{
        backgroundColor: color,
        borderRadius: '2px',
        color: '#fff',
        padding: '0.2rem',
      }}>
      {children}
    </span>
  );


This guide walks through sending text and picture messages the Bandwidth Messaging API.


## Request URL

<Highlight color="#079CEE">POST</Highlight> [<code>https://messaging.bandwidth.com/api/v2/users/{accountId}/messages</code>](/messaging-api-reference#operation/CreateMessage)

## Request Parameters

| Parameter     | Mandatory | Type                                                           | Description                                                                                                                                                                                                                                                                                                                                                                                                                   |
|:--------------|:----------|:---------------------------------------------------------------|:------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| from          | Yes       | `string`                                                       | One of your telephone numbers the message should come from (must be in E.164 format, like `+19195551212`).                                                                                                                                                                                                                                                                                                                    |
| to            | Yes       | `string`<br/>**-OR-**<br/>`array` of `1` (one) or more `strings` | The phone number(s) the message should be sent to (must be in E.164 format, like `+19195551212`). <br/><br/> Example: <br/> `"+19195551212"` <br/> **-OR-**<br/> `["+19195551212"]` <br/> **-OR-**<br/> `["+19195551212", "+19195554444", "+19192227777"]` <br/><br/> **If you supply more than one number, it will be sent as a group message.**                                                                                      |
| text          | Yes (if media is not provided)      | `string`                                                       | The contents of the text message (must be 2048 characters or less).                                                                                                                                                                                                                                                                                                                                                           |
| applicationId | Yes       | `string`                                                       | The ID of the Application your `from` number is associated with in the Bandwidth Phone Number Dashboard.                                                                                                                                                                                                                                                                                                                      |
| media         | No (required if no text is provided)       | `array`                                                        | A list of URLs to include as media attachments as part of the message. If this field is included, the message will be sent as MMS no matter the number of recipients.<br/>Refer to the [What MMS message size limits must be adhered to?](https://support.bandwidth.com/hc/en-us/articles/360014235473-What-MMS-message-size-limits-must-be-adhered-to-) article to learn more about file size limitations and best practices. |
| tag           | No        | `string`                                                       | Any string which will be included in the callback events of the message. (max 1024 Chars)                                                                                                                                                                                                                                                                                                                                     |
| priority      | No        | `string` | The message's priority, currently for toll-free or short code SMS only. Accepted values are `"default"` or `"high"`. Messages with a priority value of `"high"` are given preference over your other traffic. If not set in the request body, Bandwidth will use the `"default"` value. |
| expiration    | No        | `string` | The message's expiration date and time, **currently for toll-free or short code SMS only**. Accepted values must be in RFC-3339 format. Messages received after the expiration date and time will not be sent. If a message expires, Bandwidth will send a `message-failed` event with a 4360 error code to your callback URL. Ex: `2021-10-02T15:00:00Z`|

* Please check the [FAQ](https://support.bandwidth.com/hc/en-us/articles/360014235473-What-MMS-message-size-limits-must-be-adhered-to) for information on media size limits

### Tags

* If there is a need to identify individual outbound messages, or correlate them with an ID in your own application, the `tag` field can be set to any string (max 1024 chars). The custom `tag` will be included in all callbacks for an outbound message.
* ⚠️ The tag field is intended for use in correlation/troubleshooting. **You should not include sensitive or personally-identifiable information in the tag field.**

## Response Parameters

| Parameter     | Type     | Description                                                                                                                                                                                                                                                                                                                                                         |
|:--------------|:---------|:--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| id            | `string` | The unique ID of this message                                                                                                                                                                                                                                                                                                                                       |
| owner         | `string` | The phone number this particular message is associated with.<br/> For an outbound message, this is always the `from` number.<br/> For an inbound message, this will be (one of) the `to` number(s).<br/>For instance, if this is an inbound group message, the `owner` field will be set to the `to` number that this particular copy of the group message belongs to. |
| time          | `string` | The time stamp of when message was created                                                                                                                                                                                                                                                                                                                          |
| direction     | `string` | Whether the message was sent from Bandwidth, or received by a Bandwidth number                                                                                                                                                                                                                                                                                      |
| to            | `array`  | The phone number (or numbers) the message the message is sent to. On a POST, this can be a String, or an array of one or more numbers. In all other places, this will be an array.                                                                                                                                                                                  |
| from          | `string` | The phone number the message was sent from                                                                                                                                                                                                                                                                                                                          |
| text          | `string` | Empty text/string. Message text content will not be sent in callback.                                                                                                                                                                                                                                                                                               |
| applicationId | `string` | The ID of the Application your `from` number is associated with in the Bandwidth Phone Number Dashboard.                                                                                                                                                                                                                                                            |
| media         | `array`  | A list of URLs to include as media attachments as part of the message                                                                                                                                                                                                                                                                                               |
| tag           | `string` | An custom String that you can use to track this particular message                                                                                                                                                                                                                                                                                                  |
| segmentCount  | `int`    | This indicates the number of segments the original message from the user is broken into before sending over to carrier networks                                                                                                                                                                                                                                      |
| priority      | `string` | The priority specified by the user |
| expiration    | `string` | Message expiration date and time specified by the user.

## Examples

### Send a single message

<Tabs
  groupId="create_message"
  defaultValue="http"
  values={[
    { label: 'HTTP', value: 'http', },
    { label: 'cURL', value: 'curl', },
    { label: 'Java', value: 'java', },
    { label: 'C#', value: 'csharp', },
    { label: 'Ruby', value: 'ruby', },
    { label: 'NodeJS', value: 'nodejs', },
    { label: 'Python', value: 'python', },
    { label: 'PHP', value: 'php', },
  ]
}>
<TabItem value="http">

> Request

```http
POST https://messaging.bandwidth.com/api/v2/users/{accountId}/messages HTTP/1.1
Content-Type: application/json; charset=utf-8
Authorization: Basic dXNlcm5hbWU6cGFzc3dvcmQ=

{
    "to"            : ["+12345678902"],
    "from"          : "+12345678901",
    "text"          : "Hey, check this out!",
    "applicationId" : "93de2206-9669-4e07-948d-329f4b722ee2",
    "tag"           : "test message",
    "priority"      : "default"
}
```

> Response

```json
HTTP/1.1 202 Accepted
Content-Type: application/json

{
    "id": "14762070468292kw2fuqty55yp2b2",
    "owner": "+12345678901",
    "applicationId": "93de2206-9669-4e07-948d-329f4b722ee",
    "time": "2021-07-21T21:00:45.179Z",
    "segmentCount": 1,
    "direction": "out",
    "to": [
        "+12345678902"
    ],
    "from": "+12345678901",
    "text": "Hello World",
    "tag": "test message",
    "priority": "default"
}
```

</TabItem>
<TabItem value="curl">

> Request

```curl
curl --location --request POST 'https://messaging.bandwidth.com/api/v2/users/{accountId}/messages' --header 'Authorization: Basic dXNlcm5hbWU6cGFzc3dvcmQ=' --header 'Content-Type: application/json' --data-raw '{
    "to"            : ["+12345678902"],
    "from"          : "+12345678901",
    "text"          : "Hey, check this out!",
    "applicationId" : "93de2206-9669-4e07-948d-329f4b722ee2",
    "tag"           : "test message",
    "priority"      : "default"
}'
```

> Response

```json
HTTP/1.1 202 Accepted
Content-Type: application/json

{
    "id": "14762070468292kw2fuqty55yp2b2",
    "owner": "+12345678901",
    "applicationId": "93de2206-9669-4e07-948d-329f4b722ee",
    "time": "2021-07-21T21:00:45.179Z",
    "segmentCount": 1,
    "direction": "out",
    "to": [
        "+12345678902"
    ],
    "from": "+12345678901",
    "text": "Hello World",
    "tag": "test message",
    "priority": "default"
}
```

</TabItem>
<TabItem value="java">

```java
MessageRequest request = new MessageRequest();
request.setApplicationId("93de2206-9669-4e07-948d-329f4b722ee");
request.setTo(Collections.singletonList("+12345678901"));
request.setFrom("+12345678901");
request.setText("Hello world");

try {
    CompletableFuture<ApiResponse<BandwidthMessage>> completableFuture = client.getMessagingClient().getAPIController().createMessageAsync(ACCOUNT_ID, request);
    System.out.println(completableFuture.get().getResult());
} catch (InterruptedException | ExecutionException e) {
    System.out.println(e.getMessage());
}
```

</TabItem>
<TabItem value="csharp">

```csharp
var request = new MessageRequest()
{
    ApplicationId = "93de2206-9669-4e07-948d-329f4b722ee",
    To = new List<string> { "+12345678902" },
    From = "+12345678901",
    Text = "Hello World!"
};

var response = await client.CreateMessageAsync(accountId, request);
```

</TabItem>
<TabItem value="ruby">

```ruby
body = MessageRequest.new
body.application_id = "93de2206-9669-4e07-948d-329f4b722ee"
body.to = "+12345678902"
body.from = "+12345678901"
body.text = 'Hello World!'
body.tag = '{"test": "message"}'
begin
    result = messaging_client.create_message(ENV['BW_ACCOUNT_ID'], body)
    puts 'messageId: ' + result.data.id
rescue APIException => e
    puts e.response_code
end

```

</TabItem>
<TabItem value="nodejs">

```js
const sendMessage = async function() {
  try {
    const response = await controller.createMessage(accountId, {
        applicationId: "93de2206-9669-4e07-948d-329f4b722ee",
        to: "+12345678902",
        from: "+12345678901",
        text: 'Hello World!'
    });
    console.log(response.body);
  } catch (error) {
  console.error(error);
}};

sendMessage();
```

</TabItem>
<TabItem value="python">

```python
body = MessageRequest()
body.application_id = "93de2206-9669-4e07-948d-329f4b722ee"
body.to = "+12345678902"
body.mfrom = "+12345678901"
body.text = "Hello World!"
try:
    response = messaging_client.create_message(BW_ACCOUNT_ID, body)
    print(response.body.id)
except APIException as e:
    print(e.response_code)
```

</TabItem>
<TabItem value="php">

```php
$body = new BandwidthLib\Messaging\Models\MessageRequest();
$body->from = "+12345678901";
$body->to = array("+12345678902");
$body->applicationId = "93de2206-9669-4e07-948d-329f4b722ee";
$body->text = "Hello World!";

try {
    $response = $messagingClient->createMessage($BW_ACCOUNT_ID, $body);
    print_r($response->getResult()->id);
} catch (BandwidthLib\APIException $e) {
    print_r($e->getResponseCode());
}
```

</TabItem>
</Tabs>

### Send a group message

<Tabs
  groupId="create_message"
  defaultValue="http"
  values={[
    { label: 'HTTP', value: 'http', },
    { label: 'cURL', value: 'curl', },
    { label: 'Java', value: 'java', },
    { label: 'C#', value: 'csharp', },
    { label: 'Ruby', value: 'ruby', },
    { label: 'NodeJS', value: 'nodejs', },
    { label: 'Python', value: 'python', },
    { label: 'PHP', value: 'php', },
  ]
}>
<TabItem value="http">

> Request

```http
POST https://messaging.bandwidth.com/api/v2/users/{accountId}/messages HTTP/1.1
Content-Type: application/json; charset=utf-8
Authorization: Basic dXNlcm5hbWU6cGFzc3dvcmQ=

{
    "to"            : ["+12345678902", "+12345678903", "+12345678904"],
    "from"          : "+12345678901",
    "text"          : "Hey, check this out!",
    "applicationId" : "93de2206-9669-4e07-948d-329f4b722ee2",
    "tag"           : "test message",
    "priority"      : "default"
}
```

> Response

```json
HTTP/1.1 202 Accepted
Content-Type: application/json

{
    "id": "14762070468292kw2fuqty55yp2b2",
    "owner": "+12345678901",
    "applicationId": "93de2206-9669-4e07-948d-329f4b722ee",
    "time": "2021-07-21T21:00:45.179Z",
    "segmentCount": 1,
    "direction": "out",
    "to": [
        "+12345678902",
        "+12345678903",
        "+12345678904"
    ],
    "from": "+12345678901",
    "text": "Hello World",
    "tag": "test message",
    "priority": "default"
}
```

</TabItem>
<TabItem value="curl">

> Request

```curl
curl --location --request POST 'https://messaging.bandwidth.com/api/v2/users/{accountId}/messages' --header 'Authorization: Basic dXNlcm5hbWU6cGFzc3dvcmQ=' --header 'Content-Type: application/json' --data-raw '{
    "to"            : ["+12345678902", "+12345678903", "+12345678904"],
    "from"          : "+12345678901",
    "text"          : "Hey, check this out!",
    "applicationId" : "93de2206-9669-4e07-948d-329f4b722ee2",
    "tag"           : "test message",
    "priority"      : "default"
}'
```

> Response

```json
HTTP/1.1 202 Accepted
Content-Type: application/json

{
    "id": "14762070468292kw2fuqty55yp2b2",
    "owner": "+12345678901",
    "applicationId": "93de2206-9669-4e07-948d-329f4b722ee",
    "time": "2021-07-21T21:00:45.179Z",
    "segmentCount": 1,
    "direction": "out",
    "to": [
        "+12345678902",
        "+12345678903",
        "+12345678904"
    ],
    "from": "+12345678901",
    "text": "Hello World",
    "tag": "test message",
    "priority": "default"
}
```

</TabItem>
<TabItem value="java">

```java
MessageRequest request = new MessageRequest();
request.setApplicationId("93de2206-9669-4e07-948d-329f4b722ee");
request.setTo(Collections.singletonList(to));
request.setFrom(from);
request.setText("Hello world");

try {
    CompletableFuture<ApiResponse<BandwidthMessage>> completableFuture = client.getMessagingClient().getAPIController().createMessageAsync(ACCOUNT_ID, request);
    System.out.println(completableFuture.get().getResult());
} catch (InterruptedException | ExecutionException e) {
    System.out.println(e.getMessage());
}
```

</TabItem>
<TabItem value="csharp">

```csharp
var request = new MessageRequest()
{
    ApplicationId = "93de2206-9669-4e07-948d-329f4b722ee",
    To = new List<string> { "+12345678901" },
    From = bandwidthNumber,
    Text = "Hello World!"
};

var response = await client.CreateMessageAsync(accountId, request);
```

</TabItem>
<TabItem value="ruby">

```ruby
body = MessageRequest.new
body.application_id = "93de2206-9669-4e07-948d-329f4b722ee"
body.to = ["+12345678902", "+12345678903", "+12345678904"]
body.from = "+12345678901"
body.text = 'Hello World!'
begin
    result = messaging_client.create_message(ENV['BW_ACCOUNT_ID'], body)
    puts 'messageId: ' + result.data.id
rescue APIException => e
    puts e.response_code
end

```

</TabItem>
<TabItem value="nodejs">

```js
const sendMessage = async function() {
  try {
    const response = await controller.createMessage(accountId, {
        applicationId: "93de2206-9669-4e07-948d-329f4b722ee",
        to: ["+12345678902", "+12345678903", "+12345678904"],
        from: "+12345678901",
        text: 'Hello World!'
    });
    console.log(response.body);
  } catch (error) {
  console.error(error);
}};

sendMessage();
```

</TabItem>
<TabItem value="python">

```python
body = MessageRequest()
body.application_id = "93de2206-9669-4e07-948d-329f4b722ee"
body.to = ["+12345678902", "+12345678903", "+12345678904"]
body.mfrom = "+12345678901"
body.text = "Hello World!"
try:
    response = messaging_client.create_message(BW_ACCOUNT_ID, body)
    print(response.body.id)
except APIException as e:
    print(e.response_code)
```

</TabItem>
<TabItem value="php">

```php
$body = new BandwidthLib\Messaging\Models\MessageRequest();
$body->from = "+12345678901";
$body->to = array("+12345678902", "+12345678903", "+12345678904");
$body->applicationId = "93de2206-9669-4e07-948d-329f4b722ee";
$body->text = "Hello World!";

try {
    $response = $messagingClient->createMessage($BW_ACCOUNT_ID, $body);
    print_r($response->getResult()->id);
} catch (BandwidthLib\APIException $e) {
    print_r($e->getResponseCode());
}
```

</TabItem>
</Tabs>

### Send a picture message

<Tabs
  groupId="create_message"
  defaultValue="http"
  values={[
    { label: 'HTTP', value: 'http', },
    { label: 'cURL', value: 'curl', },
    { label: 'Java', value: 'java', },
    { label: 'C#', value: 'csharp', },
    { label: 'Ruby', value: 'ruby', },
    { label: 'NodeJS', value: 'nodejs', },
    { label: 'Python', value: 'python', },
    { label: 'PHP', value: 'php', },
  ]
}>
<TabItem value="http">

> Request

```http
POST https://messaging.bandwidth.com/api/v2/users/{accountId}/messages HTTP/1.1
Content-Type: application/json; charset=utf-8
Authorization: Basic dXNlcm5hbWU6cGFzc3dvcmQ=

{
    "to"            : ["+12345678902"],
    "from"          : "+12345678901",
    "text"          : "Hey, check this out!"
    "media"         : ["https://mySite.com/images/test_image.jpg"],
    "applicationId" : "93de2206-9669-4e07-948d-329f4b722ee2",
    "tag"           : "test message",
    "priority"      : "default"
}
```

> Response

```json
HTTP/1.1 202 Accepted
Content-Type: application/json

{
    "id": "14762070468292kw2fuqty55yp2b2",
    "owner": "+12345678901",
    "applicationId": "93de2206-9669-4e07-948d-329f4b722ee",
    "time": "2021-07-21T21:00:45.179Z",
    "segmentCount": 1,
    "direction": "out",
    "to": [
        "+12345678902"
    ],
    "from": "+12345678901",
    "text": "Hey, check this out!",
    "media": ["https://mySite.com/images/test_image.jpg"],
    "tag": "test message",
    "priority": "default"
}
```

</TabItem>
<TabItem value="curl">

> Request

```curl
curl --location --request POST 'https://messaging.bandwidth.com/api/v2/users/{accountId}/messages' --header 'Authorization: Basic dXNlcm5hbWU6cGFzc3dvcmQ=' --header 'Content-Type: application/json' --data-raw '{
    "to"            : ["+12345678902"],
    "from"          : "+12345678901",
    "text"          : "Hey, check this out!"
    "media"         : ["https://mySite.com/images/test_image.jpg"],
    "applicationId" : "93de2206-9669-4e07-948d-329f4b722ee2",
    "tag"           : "test message",
    "priority"      : "default"
}'
```

> Response

```json
HTTP/1.1 202 Accepted
Content-Type: application/json

{
    "id": "14762070468292kw2fuqty55yp2b2",
    "owner": "+12345678901",
    "applicationId": "93de2206-9669-4e07-948d-329f4b722ee",
    "time": "2021-07-21T21:00:45.179Z",
    "segmentCount": 1,
    "direction": "out",
    "to": [
        "+12345678902"
    ],
    "from": "+12345678901",
    "text": "Hey, check this out!",
    "media": ["https://mySite.com/images/test_image.jpg"],
    "tag": "test message",
    "priority": "default"
}
```

</TabItem>
<TabItem value="java">

```java
MessageRequest request = new MessageRequest();
request.setApplicationId("93de2206-9669-4e07-948d-329f4b722ee");
request.setTo(Collections.singletonList("+12345678901"));
request.setFrom("+12345678901");
request.setText("Hello world");

try {
    CompletableFuture<ApiResponse<BandwidthMessage>> completableFuture = client.getMessagingClient().getAPIController().createMessageAsync(ACCOUNT_ID, request);
    System.out.println(completableFuture.get().getResult());
} catch (InterruptedException | ExecutionException e) {
    System.out.println(e.getMessage());
}
```

</TabItem>
<TabItem value="csharp">

```csharp
var request = new MessageRequest()
{
    ApplicationId = "93de2206-9669-4e07-948d-329f4b722ee",
    To = new List<string> { "+12345678902" },
    From = "+12345678901",
    Text = "Hello World!",
    Media = new List<string> { "https://mySite.com/images/test_image.jpg" }
};

var response = await client.CreateMessageAsync(accountId, request);
```

</TabItem>
<TabItem value="ruby">

```ruby
body = MessageRequest.new
body.application_id = "93de2206-9669-4e07-948d-329f4b722ee"
body.to = "+12345678902"
body.from = "+12345678901"
body.text = 'Hello World!'
body.media = ["https://mySite.com/images/test_image.jpg"]
body.tag = '{"test": "message"}'
begin
    result = messaging_client.create_message(ENV['BW_ACCOUNT_ID'], body)
    puts 'messageId: ' + result.data.id
rescue APIException => e
    puts e.response_code
end
```

</TabItem>
<TabItem value="nodejs">

```js
const sendMessage = async function() {
  try {
    const response = await controller.createMessage(accountId, {
        applicationId: "93de2206-9669-4e07-948d-329f4b722ee",
        to: "+12345678902",
        from: "+12345678901",
        text: "Hello World!",
        media: ["https://mySite.com/images/test_image.jpg"]
    });
    console.log(response.body);
  } catch (error) {
  console.error(error);
}};

sendMessage();
```

</TabItem>
<TabItem value="python">

```python
body = MessageRequest()
body.application_id = "93de2206-9669-4e07-948d-329f4b722ee"
body.to = "+12345678902"
body.mfrom = "+12345678901"
body.text = "Hello World!"
body.media = ["https://mySite.com/images/test_image.jpg"]
try:
    response = messaging_client.create_message(BW_ACCOUNT_ID, body)
    print(response.body.id)
except APIException as e:
    print(e.response_code)
```

</TabItem>
<TabItem value="php">

```php
$body = new BandwidthLib\Messaging\Models\MessageRequest();
$body->from = "+12345678901";
$body->to = array("+12345678902");
$body->applicationId = "93de2206-9669-4e07-948d-329f4b722ee";
$body->text = "Hello World!";
$body->media = array("https://mySite.com/images/test_image.jpg")

try {
    $response = $messagingClient->createMessage($BW_ACCOUNT_ID, $body);
    print_r($response->getResult()->id);
} catch (BandwidthLib\APIException $e) {
    print_r($e->getResponseCode());
}
```

</TabItem>
</Tabs>
