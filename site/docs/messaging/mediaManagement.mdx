---
id: mediaManagement
title: Media
slug: /messaging/media
description: Manage text message media using Bandwidth's Messaging API
keywords:
  - bandwidth
  - messaging
  - media
hide_title: false
image: ../../static/img/bandwidth-logo.png
---

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

export const accountId = "{accountId}";
export const mediaId = "{mediaId}";

export const Highlight = ({children, color}) => (
    <span
      style={{
        backgroundColor: color,
        borderRadius: '2px',
        color: '#fff',
        padding: '0.2rem',
      }}>
      {children}
    </span>
  );

The Media resource lets you upload your media files to Bandwidth API servers so they can be used in applications without requiring a separate hosting provider.

You can upload files up to `3.75MB` and file storage is free for an unlimited number of files. Files are stored for up to 48 hours. The API supports the `Cache-Control` header when you upload files.

Files you upload can only be accessed by you when you supply your API user's username and password; they are not available to anonymous users.

## List Media Files

This operation returns a list of all the media files on your account.

Each request returns a maximum of 1000 media files.


### Reuqest URL

<Highlight color="#00bf8c">GET</Highlight> <code>https://messaging.bandwidth.com/api/v2/users/{accountId}/media</code>

### Request Parameters

| Header | Description |
|:---|:---|
| Continuation-Token (Header) | Token used to retrieve subsequent media. |

Retrieving more than 1000 media files requires use of the `Continuation-Token` header. The `Continuation-Token` is returned in the response header, and can be included in another request in the request header to continue retrieving the subsequent media files.

The `Continuation-Token` does not need to be set for the 1st request.

### Response Parameters

| Property      | Description                                   |
|:--------------|:----------------------------------------------|
| mediaName     | The mediaName is the unique name of the media |
| contentLength | Size of the media in Bytes                    |
| content       | URL to use to GET the specific media file.    |
| Continuation-Token (Response Header) | Token used to retrieve subsequent media. |

### Examples

<Tabs
  groupId="media"
  defaultValue="http"
  values={[
    { label: 'HTTP', value: 'http', },
    { label: 'cURL', value: 'curl', },
    { label: 'Java', value: 'java', },
    { label: 'C#', value: 'csharp', },
    { label: 'Ruby', value: 'ruby', },
    { label: 'NodeJS', value: 'nodejs', },
    { label: 'Python', value: 'python', },
    { label: 'PHP', value: 'php', },
  ]
}>
<TabItem value="http">

> Request

```http
GET https://messaging.bandwidth.com/api/v2/users/12345/media HTTP/1.1
Authorization: Basic dXNlcm5hbWU6cGFzc3dvcmQ=
```

> Response

```json
HTTP/1.1 200 OK
Content-Type: application/json

[
  {
    "contentLength": 561276,
    "mediaName": "{mediaName1}",
    "content": "https://messaging.bandwidth.com/.../media/{mediaName1}"
  },
  {
    "contentLength": 2703360,
    "mediaName": "{mediaName2}",
    "content": "https://messaging.bandwidth.com/.../media/{mediaName2}"
  },
  {
    "contentLength": 2257901,
    "mediaName": "{mediaName3}",
        "content": "https://messaging.bandwidth.com/.../media/{mediaName3}"
  }
]
```

</TabItem>
<TabItem value="curl">

> Request

```curl
curl -X GET --url 'https://messaging.bandwidth.com/api/v2/users/{accountId}/media' --header 'Authorization: Basic dXNlcm5hbWU6cGFzc3dvcmQ='
```

> Response

```json
HTTP/1.1 200 OK
Content-Type: application/json

[
  {
    "contentLength": 561276,
    "mediaName": "{mediaName1}",
    "content": "https://messaging.bandwidth.com/.../media/{mediaName1}"
  },
  {
    "contentLength": 2703360,
    "mediaName": "{mediaName2}",
    "content": "https://messaging.bandwidth.com/.../media/{mediaName2}"
  },
  {
    "contentLength": 2257901,
    "mediaName": "{mediaName3}",
        "content": "https://messaging.bandwidth.com/.../media/{mediaName3}"
  }
]
```

</TabItem>
<TabItem value="java">

```java
try {
    CompletableFuture<ApiResponse<List<Media>>> completableFuture = client.getMessagingClient().getAPIController().listMediaAsync(ACCOUNT_ID, null);
    System.out.println(completableFuture.get().getResult());
} catch (InterruptedException | ExecutionException e) {
    System.out.println(e.getMessage());
}
```

</TabItem>
<TabItem value="csharp">

```csharp
var response = await client.ListMediaAsync(accountId);
```

</TabItem>
<TabItem value="ruby">

```ruby
begin
  media = messaging_client.list_media(ENV['BW_ACCOUNT_ID'])
  media.data.each { |item|
    puts item.media_name
  }
rescue APIException => e
  puts e.response_code
end
```

</TabItem>
<TabItem value="nodejs">

```js
const listMedia = async function() {
  try {
    const response = await controller.listMedia(BW_ACCOUNT_ID);
    console.log(response.result)
  } catch (error) {
  console.error(error);
}};

listMedia();
```

</TabItem>
<TabItem value="python">

```python
try:
    response = messaging_client.list_media(BW_ACCOUNT_ID)
    print(response.body)
except APIException as e:
    print(e.response_code)
```

</TabItem>
<TabItem value="php">

```php
try {
    $response = $messagingClient->listMedia($BW_ACCOUNT_ID);
    if (count($response->getResult()) > 0) {
        print_r($response->getResult()[0]->mediaName);
    }
} catch (BandwidthLib\APIException $e) {
    print_r($e->getResponseCode());
}
```

</TabItem>
</Tabs>

## Download a Media File

You **MUST** use your API username and password to download the media each and every time you want to access the file.  We **DO NOT** recommend using Bandwidth's url to display/stream media files to your end-users.  Providing your account id, username, and password to users' devices is a security risk, as they _could_ use your credentials to access your account.

Instead, we recommend that you create a copy on your local server or a cloud storage service.  Doing so allows you to specify **YOUR** authentication method (if any) to keep your Bandwidth account and users safe.

### Reuqest URL

<Highlight color="#00bf8c">GET</Highlight> <code>https://messaging.bandwidth.com/api/v2/users/{accountId}/media/{mediaId}</code>

### Examples

<Tabs
  groupId="media"
  defaultValue="http"
  values={[
    { label: 'HTTP', value: 'http', },
    { label: 'cURL', value: 'curl', },
    { label: 'Java', value: 'java', },
    { label: 'C#', value: 'csharp', },
    { label: 'Ruby', value: 'ruby', },
    { label: 'NodeJS', value: 'nodejs', },
    { label: 'Python', value: 'python', },
    { label: 'PHP', value: 'php', },
  ]
}>
<TabItem value="http">

> Request

```http
GET https://messaging.bandwidth.com/api/v2/users/{accountId}/media/{mediaId} HTTP/1.1
Authorization: Basic dXNlcm5hbWU6cGFzc3dvcmQ=
```

> Response

```json
HTTP/1.1 200 OK
Content-Type: application/octet-stream

// The response body will be binary of your media
```

</TabItem>
<TabItem value="curl">

> Request

```curl
curl -X GET --url 'https://messaging.bandwidth.com/api/v2/users/{accountId}/media/{mediaId}' \
    --header 'Authorization: Basic dXNlcm5hbWU6cGFzc3dvcmQ='
```

> Response

```json
HTTP/1.1 200 OK
Content-Type: application/octet-stream

// The response body will be binary of your media
```

</TabItem>
<TabItem value="java">

```java
String mediaId = "media-id-123";

try {
    CompletableFuture<ApiResponse<InputStream>> completableFuture = client.getMessagingClient().getAPIController().getMediaAsync(ACCOUNT_ID, mediaId);
    System.out.println(completableFuture.get().getResult());
} catch (InterruptedException | ExecutionException e) {
    System.out.println(e.getMessage());
}
```

</TabItem>
<TabItem value="csharp">

```csharp
var mediaId = "media-id-123";

var response = await client.GetMediaAsync(accountId, mediaId);
```

</TabItem>
<TabItem value="ruby">

```ruby
begin
  downloaded_media = messaging_client.get_media(accountId, mediaId)
  f = File.open("file_to_write", "wb")
  f.puts(downloaded_media.data)
  f.close()
rescue APIException => e
  puts e.response_code
end
```

</TabItem>
<TabItem value="nodejs">

```js
const getMedia = async function() {
  try {
    const response = await controller.getMedia(BW_ACCOUNT_ID, mediaId);
    const chunks = [];
    for await (let chunk of response.result) {
        chunks.push(chunk);
    }
    fs.writeFileSync('file-to-write.pdf', chunks[0], 'binary');
  } catch (error) {
  console.error(error);
}};

getMedia();
```

</TabItem>
<TabItem value="python">

```python
media_file_name = 'sample_file_name'

try:
    response = messaging_client.get_media(BW_ACCOUNT_ID, media_file_name)
    downloaded_media_file = response.body
except APIException as e:
    print(e.response_code)
```

</TabItem>
<TabItem value="php">

```php
$mediaFileName = "sample_media_file";

try {
    $response = $messagingClient->getMedia($BW_ACCOUNT_ID, $mediaFileName);
    $downloadedMediaFile = $response->getResult();
} catch (BandwidthLib\APIException $e) {
    print_r($e->getResponseCode());
}
```

</TabItem>
</Tabs>

## Upload a Media File

This method uploads a file over HTTP. You may add headers to the request in order to provide some control to your media-file.

Bandwidth retains uploaded media for up to 48 hours.

If a file being uploaded has the same name as a file that already exists under that api account, the new file will overwrite the old file.

### Reuqest URL

<Highlight color="#652B51">PUT</Highlight> <code>https://messaging.bandwidth.com/api/v2/users/{accountId}/media/{mediaId}</code>

### Examples

<Tabs
  groupId="media"
  defaultValue="http"
  values={[
    { label: 'HTTP', value: 'http', },
    { label: 'cURL', value: 'curl', },
    { label: 'Java', value: 'java', },
    { label: 'C#', value: 'csharp', },
    { label: 'Ruby', value: 'ruby', },
    { label: 'NodeJS', value: 'nodejs', },
    { label: 'Python', value: 'python', },
    { label: 'PHP', value: 'php', },
  ]
}>
<TabItem value="http">

> Request

```http
PUT https://messaging.bandwidth.com/api/v2/users/{accountId}/media/{file.mp3} HTTP/1.1
Authorization: Basic dXNlcm5hbWU6cGFzc3dvcmQ=
Content-Type: text/plain
Content-Length: 60

"@/filepath/file.mp3"
```

> Response

```http
HTTP 204 No Content
```

</TabItem>
<TabItem value="curl">

> Request

```curl
curl -X PUT \
    --url 'https://messaging.bandwidth.com/api/v2/users/{accountId}/media/{file.mp3}' \
    --header "Content-Type: audio/mpeg" \
    --header 'Authorization: Basic dXNlcm5hbWU6cGFzc3dvcmQ=' \
    --data-raw "@{/filepath/file.mp3}"
```

> Response

```http
HTTP 204 No Content
```

</TabItem>
<TabItem value="java">

```java
String mediaId = "media-id-123";
FileWrapper fileWrapper = new FileWrapper(new File("/path/to/file"));

try {
    CompletableFuture<ApiResponse<Void>> completableFuture = client.getMessagingClient().getAPIController().uploadMediaAsync(ACCOUNT_ID, mediaId, fileWrapper.getFile().length(), fileWrapper, "content/type", "no-cache");
    System.out.println(completableFuture.get().getResult());
} catch (InterruptedException | ExecutionException e) {
    System.out.println(e.getMessage());
}
```

</TabItem>
<TabItem value="csharp">

```csharp
var mediaId = "media-id-123";

var content = "Hello world";
var contentType = "text/plain";

var memoryStream = new MemoryStream(Encoding.UTF8.GetBytes(content));
var fileStreamInfo = new FileStreamInfo(memoryStream);

var response = await client.Messaging.APIController.UploadMediaAsync(accountId, mediaId, fileStreamInfo.FileStream.Length, fileStreamInfo, contentType);
```

</TabItem>
<TabItem value="ruby">

```ruby
begin
  file_content = "12345"
  messaging_client.upload_media(
    ENV['BW_ACCOUNT_ID'],
    "mediaId",
    file_content,
    :content_type => "application/octet-stream",
    :cache_control => "no-cache"
  )
  f.close()
rescue APIException => e
  puts e.response_code
end
```

</TabItem>
<TabItem value="nodejs">

```js
const uploadMedia = async function() {
  try {
    const response = await controller.uploadMedia(BW_ACCOUNT_ID, mediaId, contents, contentType, cacheControl);
    console.log(response.statusCode)
  } catch (error) {
  console.error(error);
}};

uploadMedia();
```

</TabItem>
<TabItem value="python">

```python
media_file_name = 'sample_file_name'
media_file = b'12345' #Any binary string will work for the upload. This includes file contents

try:
    messaging_client.upload_media(BW_ACCOUNT_ID, media_file_name, media_file)
except APIException as e:
    print(e.response_code)
```

</TabItem>
<TabItem value="php">

```php
$mediaFileName = "sample_file_name";
$mediaFile = "12345"; //Any binary string will work for the upload. This includes file contents

try {
    $messagingClient->uploadMedia($BW_ACCOUNT_ID, $mediaFileName, strlen($mediaFile), $mediaFile);
} catch (BandwidthLib\APIException $e) {
    print_r($e->getResponseCode());
}
```

</TabItem>
</Tabs>

## Delete a Media File

### Request URL

<Highlight color="#ff6f47">DELETE</Highlight> <code>https://messaging.bandwidth.com/api/v2/users/{accountId}/media/{mediaId}</code>

### Examples

<Tabs
  groupId="media"
  defaultValue="http"
  values={[
    { label: 'HTTP', value: 'http', },
    { label: 'cURL', value: 'curl', },
    { label: 'Java', value: 'java', },
    { label: 'C#', value: 'csharp', },
    { label: 'Ruby', value: 'ruby', },
    { label: 'NodeJS', value: 'nodejs', },
    { label: 'Python', value: 'python', },
    { label: 'PHP', value: 'php', },
  ]
}>
<TabItem value="http">

> Request

```http
DELETE https://messaging.bandwidth.com/api/v2/users/{accountId}/media/{file.mp3} HTTP/1.1
Authorization: Basic dXNlcm5hbWU6cGFzc3dvcmQ=
```

> Response

```http
HTTP 204 No Content
```

</TabItem>
<TabItem value="curl">

> Request

```curl
curl -X PUT \
    --url 'https://messaging.bandwidth.com/api/v2/users/{accountId}/media/{file.mp3}' \
    --header 'Authorization: Basic dXNlcm5hbWU6cGFzc3dvcmQ='
```

> Response

```http
HTTP 204 No Content
```

</TabItem>
<TabItem value="java">

```java
try {
    CompletableFuture<ApiResponse<Void>> completableFuture = client.getMessagingClient().getAPIController().deleteMediaAsync(ACCOUNT_ID, mediaId);
    System.out.println(completableFuture.get().getResult());
} catch (InterruptedException | ExecutionException e) {
    System.out.println(e.getMessage());
}
```

</TabItem>
<TabItem value="csharp">

```csharp
var mediaId = "media-id-123";

var response = await client.DeleteMediaAsync(accountId, mediaId);
```

</TabItem>
<TabItem value="ruby">

```ruby
begin
  messaging_client.delete_media(ENV['BW_ACCOUNT_ID'], ENV['MEDIA_ID'])
rescue APIException => e
  puts e.response_code
end
```

</TabItem>
<TabItem value="nodejs">

```js
const deleteMedia = async function() {
  try {
    const response = await controller.deleteMedia(BW_ACCOUNT_ID, mediaId);
    console.log(response.statusCode);
  } catch (error) {
  console.error(error);
}};

deleteMedia();
```

</TabItem>
<TabItem value="python">

```python
media_id = "m-1234"

try:
    messaging_client.delete_media(BW_ACCOUNT_ID, media_id)
except APIException as e:
    print(e.response_code)
```

</TabItem>
<TabItem value="php">

```php
$mediaId = "m-1234";

try {
    $messagingClient->deleteMedia($BW_ACCOUNT_ID, $mediaId);
} catch (BandwidthLib\APIException $e) {
    print_r($e->getResponseCode());
}
```

</TabItem>
</Tabs>
