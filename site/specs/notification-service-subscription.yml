openapi: 3.0.0
info:
  title: Subscription API
  version: '1.0'
  description: >
    Because processing times may vary across all event types, Bandwidth
    recommends the use of subscriptions to receive notifications upon order
    completion, as opposed to polling the resource ID with GET requests until
    the desired state is returned.


    In order to get notified about event updates occurring on your account, you
    must configure a subscription for each eventType. Event notifications will
    be sent to the address that you provide when you configure a subscription.


    Each subscription is account-global and each eventType can have multiple
    subscriptions.
  contact:
    email: support@bandwidth.com
servers:
  - url: http://localhost:3000
tags:
  - name: Subscription
paths:
  /subscriptions:
    parameters: []
    get:
      summary: List Subscriptions
      tags:
        - Subscription
      responses:
        '200':
          $ref: '#/components/responses/Subscription-List-Response'
        '400':
          $ref: '#/components/responses/400-bad-request-response'
        '401':
          $ref: '#/components/responses/401-unauthorized-response'
        '403':
          $ref: '#/components/responses/403-forbidden-response'
        '404':
          $ref: '#/components/responses/404-not-found-response'
        '405':
          $ref: '#/components/responses/405-method-not-allowed-response'
        '500':
          $ref: '#/components/responses/500-internal-error-response'
      operationId: listSubscriptions
      description: List All Subscriptions for Account
      parameters:
        - $ref: '#/components/parameters/SubscriptionId'
        - $ref: '#/components/parameters/AccountId'
        - $ref: '#/components/parameters/SubscriptionProduct'
        - $ref: '#/components/parameters/SubscriptionEventTypes'
        - $ref: '#/components/parameters/UserName'
        - $ref: '#/components/parameters/SubscriptionStatus'
    post:
      tags:
        - Subscription
      summary: Create Subscription
      operationId: createSubscription
      responses:
        '201':
          $ref: '#/components/responses/Subscription-Response'
        '400':
          $ref: '#/components/responses/400-bad-request-response'
        '401':
          $ref: '#/components/responses/401-unauthorized-response'
        '403':
          $ref: '#/components/responses/403-forbidden-response'
        '404':
          $ref: '#/components/responses/404-not-found-response'
        '405':
          $ref: '#/components/responses/405-method-not-allowed-response'
        '500':
          $ref: '#/components/responses/500-internal-error-response'
      description: Create New Subscription
      requestBody:
        $ref: '#/components/requestBodies/New-Subscription'
  /subscriptions/{subscriptionId}:
    get:
      summary: Get Subscription by subscriptionId
      tags:
        - Subscription
      responses:
        '200':
          $ref: '#/components/responses/Subscription-Response'
        '401':
          $ref: '#/components/responses/401-unauthorized-response'
        '403':
          $ref: '#/components/responses/403-forbidden-response'
        '404':
          $ref: '#/components/responses/404-not-found-response'
        '405':
          $ref: '#/components/responses/405-method-not-allowed-response'
        '500':
          $ref: '#/components/responses/500-internal-error-response'
      operationId: getSubscription
      description: GET Subscriiption by ID
    parameters:
      - schema:
          type: string
        name: subscriptionId
        in: path
        required: true
    delete:
      tags:
        - Subscription
      summary: Delete Subscription
      operationId: deleteSubscription
      responses:
        '204':
          description: 'SubscriptionID : X Successfully Deleted'
        '400':
          $ref: '#/components/responses/400-bad-request-response'
        '401':
          $ref: '#/components/responses/401-unauthorized-response'
        '403':
          $ref: '#/components/responses/403-forbidden-response'
        '404':
          $ref: '#/components/responses/404-not-found-response'
        '405':
          $ref: '#/components/responses/405-method-not-allowed-response'
        '500':
          $ref: '#/components/responses/500-internal-error-response'
      description: Delete Subscription
    patch:
      tags:
        - Subscription
      summary: Update Subscription
      operationId: modifySubscription
      responses:
        '200':
          $ref: '#/components/responses/Subscription-Response'
        '400':
          $ref: '#/components/responses/400-bad-request-response'
        '401':
          $ref: '#/components/responses/401-unauthorized-response'
        '403':
          $ref: '#/components/responses/403-forbidden-response'
        '404':
          $ref: '#/components/responses/404-not-found-response'
        '500':
          $ref: '#/components/responses/500-internal-error-response'
      description: Update Subscription
      requestBody:
        $ref: '#/components/requestBodies/Existing-Subscription'
    put:
      tags:
        - Subscription
      summary: Rewrite Subscription
      operationId: replaceSubscription
      responses:
        '200':
          description: OK
        '400':
          $ref: '#/components/responses/400-bad-request-response'
        '401':
          $ref: '#/components/responses/401-unauthorized-response'
        '403':
          $ref: '#/components/responses/403-forbidden-response'
        '404':
          $ref: '#/components/responses/404-not-found-response'
        '500':
          $ref: '#/components/responses/500-internal-error-response'
      description: Rewrite Subscription
      requestBody:
        $ref: '#/components/requestBodies/Existing-Subscription'
components:
  schemas:
    callback:
      title: callback
      type: object
      properties:
        url:
          type: string
        publicKey:
          type: string
      x-examples:
        Example Callback Object:
          callback:
            url: some-url
            publicKey: key
      description: Example Callback Object
    subscription-status-enum:
      title: Subscription Status Enum
      type: string
      description: The Status of the Subscription
      enum:
        - ACTIVE
        - INACTIVE
      example: ACTIVE
    subscription:
      title: Subscription Response
      properties:
        subscriptionId:
          type: string
          minLength: 1
        dateOfLastModification:
          type: string
          minLength: 1
        product:
          $ref: '#/components/schemas/product-enum'
        eventType:
          $ref: '#/components/schemas/event-type-enum'
        entityId:
          type: string
          minLength: 1
        subscriptionStatus:
          $ref: '#/components/schemas/subscription-status-enum'
        tags:
          $ref: '#/components/schemas/tags'
        notifyStates:
          type: array
          items:
            type: string
            anyOf:
              - allOf:
                  - $ref: '#/components/schemas/event-status-enum'
        notificationChannel:
          oneOf:
            - allOf:
                - $ref: '#/components/schemas/callback'
    tags:
      title: Tag Elements
      type: array
      properties:
        items:
          type: object
          properties:
            tag:
              type: object
              properties:
                name:
                  type: string
                  minLength: 1
                value:
                  type: string
                  minLength: 1
    event-type-enum:
      title: event-type-enum
      type: string
      description: The Event Type of the Subscription
      enum:
        - portinOrderStatus
      example: portinOrderStatus
      x-examples:
        example-1: portinOrderStatus
    product-enum:
      title: product-enum
      type: string
      description: The Product of the Subscription
      enum:
        - porting
      example: porting
    event-status-enum:
      title: event-status-enum
      type: string
      description: "The valid Event Status values\n|**Status** | **Description**|\n|-----------|----------------|\n|ACCEPTED_BY_CARRIER| Good news - your port-in is accepted by our carrier. |\n|CANCELED| Your port-in order is cancelled.|\n|COMPLETED|Your port-in order is completed.|\n|DRAFT  | Your port-in order is created, but not yet submitted. You can chamge the content of the order or delete it anytime.|\n|MISSING_DATA|Your port-in order has been returned by our LNP team - because the order doesn't contain required information, this can be data or document. Your order has to be amended and resubmitted again.|\n|PENDING_CARRIER_APPROVAL|Your port-in order is transmitted to our carrier. |\n|PROCESSING_CANCELLATION| You are requesting the cancellation of your order. Our LNP team will get back to you shortly|\n|REJECTED|\tYour port-in order is rejected by our LNP team/carrier. Please contact our LNP team for further details.Your port-in order is submitted, our LNP team will take care of it shortly. In case you need to change your order, you have to request a cancellation or ask our LNP team to return your order.|\n|SUBMITTED| Your port-in order is submitted, our LNP team will take care of it shortly. In case you need to change your order, you have to request a cancellation or ask our LNP team to return your order.|\n"
      enum:
        - ACCEPTED_BY_CARRIER
        - CANCELED
        - COMPLETED
        - DRAFT
        - MISSING_DATA
        - PENDING_CARRIER_APPROVAL
        - PROCESSING_CANCELLATION
        - READY_FOR_CONFIGURATION
        - REJECTED
        - SUBMITTED
  securitySchemes:
    bearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
  responses:
    Subscription-List-Response:
      description: Example Subscription List Response
      content:
        application/json:
          schema:
            description: ''
            type: object
            properties:
              links:
                type: array
                items:
                  type: object
              data:
                type: object
                properties:
                  subscriptions:
                    type: array
                    uniqueItems: true
                    minItems: 0
                    items:
                      $ref: '#/components/schemas/subscription'
              errors:
                type: array
                items:
                  type: object
          examples:
            Example Subscription List Response:
              value:
                links: []
                data:
                  subscriptions:
                    - subscription:
                        subscriptionId: string
                        dateOfLastModification: '2019-08-24T14:15:22Z'
                        product: porting
                        eventType: portin
                        entityId: unique-id-value
                        subscriptionStatus: ACTIVE
                        tags:
                          - tag:
                              name: tag-name
                              value: tag-value
                        notifyStates:
                          - DRAFT
                          - COMPLETED
                        notificationChannel:
                          callback:
                            url: some-url
                            publicKey: key
                errors: []
    Subscription-Response:
      description: Example Subscription Response
      content:
        application/json:
          schema:
            description: ''
            type: object
            properties:
              links:
                type: array
                items:
                  type: object
              data:
                $ref: '#/components/schemas/subscription'
              errors:
                type: array
                items:
                  type: object
          examples:
            Example Subscription Response:
              value:
                links: []
                data:
                  subscriptionId: string
                  dateOfLastModification: '2019-08-24T14:15:22Z'
                  product: porting
                  eventType: portinOrderStatus
                  entityId: unique-id-value
                  subscriptionStatus: ACTIVE
                  tags:
                    - tag:
                        name: tag-name
                        value: tag-value
                  notifyStates:
                    - COMPLETED
                    - DRAFT
                  notificationChannel:
                    callback:
                      url: some-url
                      publicKey: key
                errors: []
    401-unauthorized-response:
      description: 401 Unauthorized Response
      content:
        application/json:
          schema:
            description: ''
            type: object
            x-examples:
              example-1:
                links: []
                data: null
                errors:
                  - type: authentication-credentials
                    description: Invalid or missing credentials.
                    code: optional-but-recommended-error-code
                    id: optional-error-id
                    meta: null
            properties:
              links:
                type: array
                items:
                  type: object
              data: {}
              errors:
                type: array
                uniqueItems: true
                minItems: 1
                items:
                  type: object
                  properties:
                    type:
                      type: string
                      minLength: 1
                    description:
                      type: string
                      minLength: 1
                    code:
                      type: string
                      minLength: 1
                    id:
                      type: string
                      minLength: 1
                    meta: {}
                  required:
                    - type
                    - description
                    - code
                    - id
            required:
              - errors
          examples:
            Example 401 Unauthorized Response:
              value:
                links: []
                data: null
                errors:
                  - type: authentication-credentials
                    description: Invalid or missing credentials.
                    code: optional-but-recommended-error-code
                    id: optional-error-id
                    meta: null
    403-forbidden-response:
      description: 403 Forbidden Response
      content:
        application/json:
          schema:
            description: ''
            type: object
            x-examples:
              example-1:
                links: []
                data: null
                errors:
                  - type: resource-permissions
                    description: User does not have permissions to access this resource.
                    code: optional-but-recommended-error-code
                    id: optional-error-id
                    meta: null
            properties:
              links:
                type: array
                items:
                  type: object
              data: {}
              errors:
                type: array
                uniqueItems: true
                minItems: 1
                items:
                  type: object
                  properties:
                    type:
                      type: string
                      minLength: 1
                    description:
                      type: string
                      minLength: 1
                    code:
                      type: string
                      minLength: 1
                    id:
                      type: string
                      minLength: 1
                    meta: {}
                  required:
                    - type
                    - description
                    - code
                    - id
            required:
              - errors
          examples:
            Example 403 Forbidden Response:
              value:
                links: []
                data: null
                errors:
                  - type: resource-permissions
                    description: User does not have permissions to access this resource.
                    code: optional-but-recommended-error-code
                    id: optional-error-id
                    meta: null
    400-bad-request-response:
      description: 400 Bad Request Response
      content:
        application/json:
          schema:
            description: ''
            type: object
            x-examples:
              example-1:
                links: []
                data: null
                errors:
                  - type: invalid-parameter-value
                    description: '''limit'' parameter cannot be negative.'
                    code: optional-but-recommended-error-code
                    source:
                      parameter: limit
                    id: optional-error-id
                    meta: null
            properties:
              links:
                type: array
                items:
                  type: object
              data: {}
              errors:
                type: array
                uniqueItems: true
                minItems: 1
                items:
                  type: object
                  properties:
                    type:
                      type: string
                      minLength: 1
                    description:
                      type: string
                      minLength: 1
                    code:
                      type: string
                      minLength: 1
                    source:
                      type: object
                      properties:
                        parameter:
                          type: string
                          minLength: 1
                      required:
                        - parameter
                    id:
                      type: string
                      minLength: 1
                    meta: {}
                  required:
                    - type
                    - description
                    - code
                    - id
            required:
              - errors
          examples:
            Example 400 Bad Request Response:
              value:
                links: []
                data: null
                errors:
                  - type: invalid-parameter-value
                    description: '''limit'' parameter cannot be negative.'
                    code: optional-but-recommended-error-code
                    source:
                      parameter: limit
                    id: optional-error-id
                    meta: null
    404-not-found-response:
      description: 404 Not Found Response
      content:
        application/json:
          schema:
            description: ''
            type: object
            x-examples:
              example-1:
                links: []
                data: null
                errors:
                  - type: resource-not-found
                    description: The resource specified cannot be found.
                    code: optional-but-recommended-error-code
                    source:
                      reference: api.bandwidth.com/v3/porting/PortInOrders/123465789
                    id: optional-error-id
                    meta:
                      portInOrderId: '123456789'
                      phoneNumber: '+19191234567'
            properties:
              links:
                type: array
                items:
                  type: object
              data: {}
              errors:
                type: array
                uniqueItems: true
                minItems: 1
                items:
                  type: object
                  properties:
                    type:
                      type: string
                      minLength: 1
                    description:
                      type: string
                      minLength: 1
                    code:
                      type: string
                      minLength: 1
                    source:
                      type: object
                      properties:
                        reference:
                          type: string
                          minLength: 1
                      required:
                        - reference
                    id:
                      type: string
                      minLength: 1
                    meta:
                      type: object
                      properties:
                        portInOrderId:
                          type: string
                          minLength: 1
                        phoneNumber:
                          type: string
                          minLength: 1
                      required:
                        - portInOrderId
                        - phoneNumber
                  required:
                    - type
                    - description
                    - code
                    - id
            required:
              - errors
          examples:
            Example 404 Not Found Response:
              value:
                links: []
                data: null
                errors:
                  - type: resource-not-found
                    description: The resource specified cannot be found.
                    code: optional-but-recommended-error-code
                    source:
                      reference: api.bandwidth.com/v3/porting/PortInOrders/123465789
                    id: optional-error-id
                    meta:
                      portInOrderId: '123456789'
                      phoneNumber: '+19191234567'
    500-internal-error-response:
      description: 500 Internal Error Response
      content:
        application/json:
          schema:
            description: ''
            type: object
            x-examples:
              example-1:
                links: []
                data: null
                errors:
                  - type: internal-server-error
                    description: >-
                      Unexpected internal server error. Contact Bandwidth
                      Customer Support if this problem persists.
                    code: optional-but-recommended-error-code
                    id: optional-error-id
                    meta:
                      message: An optional metadata field
            properties:
              links:
                type: array
                items:
                  type: object
              data: {}
              errors:
                type: array
                uniqueItems: true
                minItems: 1
                items:
                  type: object
                  properties:
                    type:
                      type: string
                      minLength: 1
                    description:
                      type: string
                      minLength: 1
                    code:
                      type: string
                      minLength: 1
                    id:
                      type: string
                      minLength: 1
                    meta:
                      type: object
                      properties:
                        message:
                          type: string
                          minLength: 1
                      required:
                        - message
                  required:
                    - type
                    - description
                    - code
                    - id
            required:
              - errors
          examples:
            Example 500 Internal Error Response:
              value:
                links: []
                data: null
                errors:
                  - type: internal-server-error
                    description: >-
                      Unexpected internal server error. Contact Bandwidth
                      Customer Support if this problem persists.
                    code: optional-but-recommended-error-code
                    id: optional-error-id
                    meta:
                      message: An optional metadata field
    405-method-not-allowed-response:
      description: 405 Method Not Allowed Response
      content:
        application/json:
          schema:
            description: ''
            type: object
            x-examples:
              example-1:
                links: []
                data: null
                errors:
                  - type: http-method-not-supported
                    description: The HTTP method used is not supported by this resource.
                    code: optional-but-recommended-error-code
                    source:
                      method: PATCH
                    id: optional-error-id
                    meta: null
            properties:
              links:
                type: array
                items:
                  type: object
              data: {}
              errors:
                type: array
                uniqueItems: true
                minItems: 1
                items:
                  type: object
                  properties:
                    type:
                      type: string
                      minLength: 1
                    description:
                      type: string
                      minLength: 1
                    code:
                      type: string
                      minLength: 1
                    source:
                      type: object
                      properties:
                        method:
                          type: string
                          minLength: 1
                      required:
                        - method
                    id:
                      type: string
                      minLength: 1
                    meta: {}
                  required:
                    - type
                    - description
                    - code
                    - id
            required:
              - errors
          examples:
            Example 405 Method Not Allowed Response:
              value:
                links: []
                data: null
                errors:
                  - type: http-method-not-supported
                    description: The HTTP method used is not supported by this resource.
                    code: optional-but-recommended-error-code
                    source:
                      method: PATCH
                    id: optional-error-id
                    meta: null
  requestBodies:
    New-Subscription:
      content:
        application/json:
          schema:
            description: Request body for a New Subscription
            type: object
            properties:
              product:
                $ref: '#/components/schemas/product-enum'
              eventType:
                $ref: '#/components/schemas/event-type-enum'
              entityId:
                type: string
                minLength: 0
              subscriptionStatus:
                $ref: '#/components/schemas/subscription-status-enum'
              tags:
                $ref: '#/components/schemas/tags'
              notifyStates:
                type: array
                items:
                  anyOf:
                    - allOf:
                        - $ref: '#/components/schemas/event-status-enum'
                  type: string
              notificationChannel:
                oneOf:
                  - allOf:
                      - $ref: '#/components/schemas/callback'
          examples:
            'Example New Subscription ':
              value:
                product: porting
                eventType: portinOrderStatus
                entityId: unique-id-value
                subscriptionStatus: ACTIVE
                tags:
                  - tag:
                      name: tag-name
                      value: tag-value
                notifyStates:
                  - DRAFT
                notificationChannel:
                  callback:
                    url: some-url
                    publicKey: key
      description: Request Body for New Subscription
    Existing-Subscription:
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/subscription'
          examples:
            Example Existing Subscription:
              value:
                product: porting
                eventType: portinOrderStatus
                entityId: unique-id-value
                subscriptionStatus: ACTIVE
                tags:
                  - tag:
                      name: tag-name
                      value: tag-value
                notifyStates:
                  - DRAFT
                  - COMPLETED
                notificationChannel:
                  callback:
                    url: some-url
                    publicKey: key
      description: Request Body for Existing Subscription
  parameters:
    SubscriptionId:
      name: SubscriptionId
      in: query
      required: false
      schema:
        type: string
      description: Unique ID of a Subscription
    AccountId:
      name: AccountId
      in: query
      required: false
      schema:
        type: string
      description: Unique ID of an Account
    SubscriptionProduct:
      name: SubscriptionProduct
      in: query
      required: false
      schema:
        type: string
      description: Product of Event Subscribed to for Notification
    SubscriptionEventTypes:
      name: SubscriptionEventTypes
      in: query
      required: false
      schema:
        type: string
      description: EventTypes Subscribed to
    UserName:
      name: UserName
      in: query
      required: false
      schema:
        type: string
      description: System UserName of User
    SubscriptionStatus:
      name: SubscriptionStatus
      in: query
      required: false
      schema:
        type: string
      description: Active/Inactive
